(function(){function Z(d,g,f,k){this.f=d[0];this.a=d[1];this.g=d[2];this.L=d[3];this.j=d[4];this.i=d[5];this.C=d[6];this.o=this.L;this.F=this.a*this.g-this.L;this.m=this.G=!1;this.b=Array(this.a*this.g);this.A=g;this.s=f;this.$=k;this.D=this.N=0;this.Y=this.X=-1;this.W=!1;this.I=[];for(g=this.a*this.g-1;0<=g;g--)this.b[g]=new p(d[8+3*g],d[3*g+9],d[3*g+10]),1!==this.b[g].c||this.b[g].h||this.F--;this.U=function(a,b){if(1===this.f&&0<=a&&0<=b&&a<this.a&&b<this.g&&this.b[b*this.a+a].h)for(var e=this.a*
this.g-1;0<=e;e--)if(!this.b[e].h&&e!==b*this.a+a){this.b[b*this.a+a].h=!1;0<b&&0<a&&!this.b[(b-1)*this.a+a-1].h&&this.b[(b-1)*this.a+a-1].l--;0<b&&!this.b[(b-1)*this.a+a].h&&this.b[(b-1)*this.a+a].l--;0<b&&a<this.a-1&&!this.b[(b-1)*this.a+a+1].h&&this.b[(b-1)*this.a+a+1].l--;0<a&&!this.b[b*this.a+a-1].h&&this.b[b*this.a+a-1].l--;a<this.a-1&&!this.b[b*this.a+a+1].h&&this.b[b*this.a+a+1].l--;b<this.g-1&&0<a&&!this.b[(b+1)*this.a+a-1].h&&this.b[(b+1)*this.a+a-1].l--;b<this.g-1&&!this.b[(b+1)*this.a+
a].h&&this.b[(b+1)*this.a+a].l--;b<this.g-1&&a<this.a-1&&!this.b[(b+1)*this.a+a+1].h&&this.b[(b+1)*this.a+a+1].l--;var h=e%this.a,l=Math.floor(e/this.a);this.b[e].h=!0;0<l&&0<h&&!this.b[(l-1)*this.a+h-1].h&&this.b[(l-1)*this.a+h-1].l++;0<l&&!this.b[(l-1)*this.a+h].h&&this.b[(l-1)*this.a+h].l++;0<l&&h<this.a-1&&!this.b[(l-1)*this.a+h+1].h&&this.b[(l-1)*this.a+h+1].l++;0<h&&!this.b[l*this.a+h-1].h&&this.b[l*this.a+h-1].l++;h<this.a-1&&!this.b[l*this.a+h+1].h&&this.b[l*this.a+h+1].l++;l<this.g-1&&0<
h&&!this.b[(l+1)*this.a+h-1].h&&this.b[(l+1)*this.a+h-1].l++;l<this.g-1&&!this.b[(l+1)*this.a+h].h&&this.b[(l+1)*this.a+h].l++;l<this.g-1&&h<this.a-1&&!this.b[(l+1)*this.a+h+1].h&&this.b[(l+1)*this.a+h+1].l++;break}this.S=this.N=Date.now();this.G=!0;0<this.C&&(this.D=Date.now()+1E3*this.C)};0!==this.f&&2!==this.f&&3!==this.f&&4!==this.f&&5!==this.f||this.U();this.V=function(a,b){if(0<=a&&0<=b&&a<this.a&&b<this.g){0===this.b[b*this.a+a].c&&(this.i--,0===this.i&&this.B());var e=[];this.v(a,b,e);for(var h=
e.length/2-1;0<=h;h--)m(e[2*h],e[2*h+1],this.A,this.b[e[2*h+1]*this.a+e[2*h]],this.s)}};this.v=function(a,b,e){0===this.b[b*this.a+a].c&&(e[e.length]=a,e[e.length]=b,5===this.f?(this.b[b*this.a+a].c=5,this.i--,0===this.i&&this.B()):(this.b[b*this.a+a].c=1,this.b[b*this.a+a].h?(this.j--,0===this.j&&this.B()):(this.F--,0===this.F&&this.B()),this.b[b*this.a+a].h||0!==this.b[b*this.a+a].l||(0<b&&0<a&&0===this.b[(b-1)*this.a+a-1].c&&this.v(a-1,b-1,e),0<b&&0===this.b[(b-1)*this.a+a].c&&this.v(a,b-1,e),
0<b&&a<this.a-1&&0===this.b[(b-1)*this.a+a+1].c&&this.v(a+1,b-1,e),0<a&&0===this.b[b*this.a+a-1].c&&this.v(a-1,b,e),a<this.a-1&&0===this.b[b*this.a+a+1].c&&this.v(a+1,b,e),b<this.g-1&&0<a&&0===this.b[(b+1)*this.a+a-1].c&&this.v(a-1,b+1,e),b<this.g-1&&0===this.b[(b+1)*this.a+a].c&&this.v(a,b+1,e),b<this.g-1&&a<this.a-1&&0===this.b[(b+1)*this.a+a+1].c&&this.v(a+1,b+1,e))))};this.J=function(a,b){0<=a&&0<=b&&a<this.a&&b<this.g&&(0===this.b[b*this.a+a].c?(this.b[b*this.a+a].c=2,this.o--,2===this.f&&(this.i--,
0===this.i&&this.B())):2===this.b[b*this.a+a].c?(this.b[b*this.a+a].c=this.$?3:0,this.o++,2===this.f&&this.i++):3===this.b[b*this.a+a].c&&(this.b[b*this.a+a].c=0),m(a,b,this.A,c.b[b*c.a+a],this.s))};this.K=function(a,b){0<=a&&0<=b&&a<this.a&&b<this.g&&(0===this.b[b*this.a+a].c?(this.b[b*this.a+a].c=5,5===this.f&&(this.i--,0===this.i&&this.B())):5===this.b[b*this.a+a].c&&(this.b[b*this.a+a].c=0,5===this.f&&this.i++),m(a,b,this.A,c.b[b*c.a+a],this.s))};this.H=function(a,b){if(0<=a&&0<=b&&a<this.a&&
b<this.g){var e=[];this.aa(a,b,e);for(var h=e.length/2-1;0<=h;h--)m(e[2*h],e[2*h+1],this.A,c.b[e[2*h+1]*c.a+e[2*h]],this.s)}};this.aa=function(a,b,e){if(1===this.b[b*this.a+a].c&&!this.b[b*this.a+a].h){var h=0;0<b&&0<a&&(this.b[(b-1)*this.a+a-1].h&&1===this.b[(b-1)*this.a+a-1].c||2===this.b[(b-1)*this.a+a-1].c)&&h++;0<b&&(this.b[(b-1)*this.a+a].h&&1===this.b[(b-1)*this.a+a].c||2===this.b[(b-1)*this.a+a].c)&&h++;0<b&&a<this.a-1&&(this.b[(b-1)*this.a+a+1].h&&1===this.b[(b-1)*this.a+a+1].c||2===this.b[(b-
1)*this.a+a+1].c)&&h++;0<a&&(this.b[b*this.a+a-1].h&&1===this.b[b*this.a+a-1].c||2===this.b[b*this.a+a-1].c)&&h++;a<this.a-1&&(this.b[b*this.a+a+1].h&&1===this.b[b*this.a+a+1].c||2===this.b[b*this.a+a+1].c)&&h++;b<this.g-1&&0<a&&(this.b[(b+1)*this.a+a-1].h&&1===this.b[(b+1)*this.a+a-1].c||2===this.b[(b+1)*this.a+a-1].c)&&h++;b<this.g-1&&(this.b[(b+1)*this.a+a].h&&1===this.b[(b+1)*this.a+a].c||2===this.b[(b+1)*this.a+a].c)&&h++;b<this.g-1&&a<this.a-1&&(this.b[(b+1)*this.a+a+1].h&&1===this.b[(b+1)*
this.a+a+1].c||2===this.b[(b+1)*this.a+a+1].c)&&h++;this.b[b*this.a+a].l===h&&(0<b&&0<a&&0===this.b[(b-1)*this.a+a-1].c&&this.v(a-1,b-1,e),0<b&&0===this.b[(b-1)*this.a+a].c&&this.v(a,b-1,e),0<b&&a<this.a-1&&0===this.b[(b-1)*this.a+a+1].c&&this.v(a+1,b-1,e),0<a&&0===this.b[b*this.a+a-1].c&&this.v(a-1,b,e),a<this.a-1&&0===this.b[b*this.a+a+1].c&&this.v(a+1,b,e),b<this.g-1&&0<a&&0===this.b[(b+1)*this.a+a-1].c&&this.v(a-1,b+1,e),b<this.g-1&&0===this.b[(b+1)*this.a+a].c&&this.v(a,b+1,e),b<this.g-1&&a<
this.a-1&&0===this.b[(b+1)*this.a+a+1].c&&this.v(a+1,b+1,e))}};this.O=function(a,b){if(0<=a&&0<=b&&a<this.a&&b<this.g&&0===this.b[b*this.a+a].c){this.b[b*this.a+a].c=1;this.b[b*this.a+a].h?this.i--:this.j--;var e=[];e[e.length]=a;e[e.length]=b;this.b[b*this.a+a].h||this.u(a,b,e);0<b&&0<a&&1===this.b[(b-1)*this.a+a-1].c&&this.u(a-1,b-1,e);0<b&&1===this.b[(b-1)*this.a+a].c&&this.u(a,b-1,e);0<b&&a<this.a-1&&1===this.b[(b-1)*this.a+a+1].c&&this.u(a+1,b-1,e);0<a&&1===this.b[b*this.a+a-1].c&&this.u(a-1,
b,e);a<this.a-1&&1===this.b[b*this.a+a+1].c&&this.u(a+1,b,e);b<this.g-1&&0<a&&1===this.b[(b+1)*this.a+a-1].c&&this.u(a-1,b+1,e);b<this.g-1&&1===this.b[(b+1)*this.a+a].c&&this.u(a,b+1,e);b<this.g-1&&a<this.a-1&&1===this.b[(b+1)*this.a+a+1].c&&this.u(a+1,b+1,e);for(var h=e.length/2-1;0<=h;h--)m(e[2*h],e[2*h+1],this.A,this.b[e[2*h+1]*this.a+e[2*h]],this.s);0!==this.i&&0!==this.j||this.B()}};this.u=function(a,b,e){0===this.b[b*this.a+a].c&&(this.b[b*this.a+a].c=1,e[e.length]=a,e[e.length]=b);if(1===this.b[b*
this.a+a].c&&!this.b[b*this.a+a].h){var h=0;0<b&&0<a&&this.b[(b-1)*this.a+a-1].h&&1===this.b[(b-1)*this.a+a-1].c&&h++;0<b&&this.b[(b-1)*this.a+a].h&&1===this.b[(b-1)*this.a+a].c&&h++;0<b&&a<this.a-1&&this.b[(b-1)*this.a+a+1].h&&1===this.b[(b-1)*this.a+a+1].c&&h++;0<a&&this.b[b*this.a+a-1].h&&1===this.b[b*this.a+a-1].c&&h++;a<this.a-1&&this.b[b*this.a+a+1].h&&1===this.b[b*this.a+a+1].c&&h++;b<this.g-1&&0<a&&this.b[(b+1)*this.a+a-1].h&&1===this.b[(b+1)*this.a+a-1].c&&h++;b<this.g-1&&this.b[(b+1)*this.a+
a].h&&1===this.b[(b+1)*this.a+a].c&&h++;b<this.g-1&&a<this.a-1&&this.b[(b+1)*this.a+a+1].h&&1===this.b[(b+1)*this.a+a+1].c&&h++;this.b[b*this.a+a].l===h&&(0<b&&0<a&&0===this.b[(b-1)*this.a+a-1].c&&this.u(a-1,b-1,e),0<b&&0===this.b[(b-1)*this.a+a].c&&this.u(a,b-1,e),0<b&&a<this.a-1&&0===this.b[(b-1)*this.a+a+1].c&&this.u(a+1,b-1,e),0<a&&0===this.b[b*this.a+a-1].c&&this.u(a-1,b,e),a<this.a-1&&0===this.b[b*this.a+a+1].c&&this.u(a+1,b,e),b<this.g-1&&0<a&&0===this.b[(b+1)*this.a+a-1].c&&this.u(a-1,b+1,
e),b<this.g-1&&0===this.b[(b+1)*this.a+a].c&&this.u(a,b+1,e),b<this.g-1&&a<this.a-1&&0===this.b[(b+1)*this.a+a+1].c&&this.u(a+1,b+1,e))}};this.w=function(a,b,e){if(this.X!==a||this.Y!==b||this.W!==e){this.X=a;this.Y=b;this.W=w;for(var h=this.I.length-1;0<=h;h--)c.b[this.I[h]].w=!1;h=[];0<=a&&0<=b&&a<this.a&&b<this.g&&(e?(0<b&&0<a&&0===this.b[(b-1)*this.a+a-1].c&&h.push((b-1)*this.a+a-1),0<b&&0===this.b[(b-1)*this.a+a].c&&h.push((b-1)*this.a+a),0<b&&a<this.a-1&&0===this.b[(b-1)*this.a+a+1].c&&h.push((b-
1)*this.a+a+1),0<a&&0===this.b[b*this.a+a-1].c&&h.push(b*this.a+a-1),a<this.a-1&&0===this.b[b*this.a+a+1].c&&h.push(b*this.a+a+1),b<this.g-1&&0<a&&0===this.b[(b+1)*this.a+a-1].c&&h.push((b+1)*this.a+a-1),b<this.g-1&&0===this.b[(b+1)*this.a+a].c&&h.push((b+1)*this.a+a),b<this.g-1&&a<this.a-1&&0===this.b[(b+1)*this.a+a+1].c&&h.push((b+1)*this.a+a+1)):h.push(b*this.a+a));a=[];a=a.concat(this.I);for(b=h.length-1;0<=b;b--)c.b[h[b]].w=!0,-1===a.indexOf(h[b])&&a.push(h[b]);for(b=a.length-1;0<=b;b--){e=a[b]%
this.a;var l=Math.floor(a[b]/this.a);m(e,l,this.A,this.b[l*this.a+e],this.s)}this.I=h}};this.P=function(){for(var a=0;a<this.g;a++)for(var b=0;b<this.a;b++)m(b,a,this.A,this.b[a*this.a+b],this.s)};this.R=function(){var a=Array(8+3*this.a*this.g);a[0]=this.f;a[1]=this.a;a[2]=this.g;a[3]=this.L;a[4]=this.j;a[5]=this.i;a[6]=this.C;a[7]=0;for(var b=this.a*this.g,e=0;e<b;e++)a[8+3*e]=this.b[e].l,a[3*e+9]=this.b[e].h,a[3*e+10]=this.b[e].c;return a};this.Z=function(a){for(var b=a.length/2,e=0;e<b;e++){var h=
a[2*e]%this.a,l=Math.floor(a[2*e]/this.a);0===a[2*e+1]?0===c.f||1===c.f||4===c.f?this.V(h,l):(2===c.f||5===c.f)&&this.K(h,l):1===a[2*e+1]&&(0===c.f||1===c.f||2===c.f||5===c.f?this.J(h,l):3===c.f&&this.O(h,l))}};this.T=function(a){for(var b=a.length/2,e=0;e<b;e++){var h=a[2*e]%this.a,l=Math.floor(a[2*e]/this.a);0===a[2*e+1]?this.M(h,l,11):1===a[2*e+1]&&this.M(h,l,9)}};this.B=function(){this.m=!0;this.D=Date.now();if(0===this.F&&(0===this.f||1===this.f))for(var a=0;a<c.g;a++)for(var b=0;b<c.a;b++)0===
this.b[a*this.a+b].c&&this.J(b,a);(2===this.f||4===this.f||5===this.f)&&0<this.i&&(this.j-=this.i);for(b=0;b<c.g;b++)for(var e=0;e<c.a;e++)a=b*this.a+e,2!==this.b[a].c||this.b[a].h||(this.b[a].c=4,m(e,b,this.A,c.b[a],this.s),2===this.f&&this.j--),5===this.b[a].c&&this.b[a].h&&(this.b[a].c=6,m(e,b,this.A,c.b[a],this.s),5===this.f&&this.j--)};this.M=function(a,b,e){0<=a&&0<=b&&a<this.a&&b<this.g&&(9===e?(2!==this.b[b*this.a+a].c&&this.o--,this.b[b*this.a+a].c=2):10===e?(2===this.b[b*this.a+a].c&&this.o++,
this.b[b*this.a+a].c=0):11===e?this.b[b*this.a+a].c=5:(2===this.b[b*this.a+a].c&&this.o++,this.b[b*this.a+a].l=e,this.b[b*this.a+a].c=1),m(a,b,this.A,this.b[b*this.a+a],this.s))};0===this.F&&0===this.i&&this.B()}function p(d,g,f){this.l=d;this.h=g;this.c=f;this.w=!1}function m(d,g,f,k,a){d*=a;g*=a;f.beginPath();f.lineWidth="1";f.strokeStyle="#FFFFFF";f.rect(d,g,a-1,a-1);f.stroke();f.font="bold "+2*a/3+"pt monospace";f.textBaseline="middle";f.textAlign="center";if(0===k.c)f.fillStyle=k.w?"#87CEFA":
"#6495ED",f.fillRect(d+1,g+1,a-2,a-2);else if(1===k.c)if(f.fillStyle="#F5F5F5",f.fillRect(d+1,g+1,a-2,a-2),k.h)f.fillStyle="black",f.beginPath(),f.arc(d+a/2,g+a/2,a/4,0,360,!1),f.fill(),f.strokeStyle="black",f.moveTo(d+a/8,g+a/2),f.lineTo(d+a-a/8,g+a/2),f.moveTo(d+a/2,g+a/8),f.lineTo(d+a/2,g+a-a/8),f.moveTo(d+a/4,g+a/4),f.lineTo(d+a-a/4,g+a-a/4),f.moveTo(d+a-a/4,g+a/4),f.lineTo(d+a/4,g+a-a/4),f.stroke();else{if(0<k.l){switch(k.l){case 1:f.fillStyle="#00BFFF";break;case 2:f.fillStyle="#6B8E23";break;
case 3:f.fillStyle="#C71585";break;case 4:f.fillStyle="#0000FF";break;case 5:f.fillStyle="#FF0000";break;case 6:f.fillStyle="#008000";break;case 7:f.fillStyle="#EE82EE";break;case 8:f.fillStyle="#8B008B"}f.fillText(k.l,d+a/2,g+a/2)}}else if(2===k.c||4===k.c||5===k.c||6===k.c){if(f.fillStyle="#F5F5F5",f.fillRect(d+1,g+1,a-2,a-2),f.strokeStyle="#A52A2A",f.beginPath(),f.moveTo(d+a/3,g+a-a/5),f.lineTo(d+a/3,g+a/5),f.stroke(),f.fillStyle=2===k.c||4===k.c?"#FF0000":"#008000",f.lineTo(d+a-a/4,g+a/3),f.lineTo(d+
a/3,g+a/3+a/5),f.fill(),4===k.c||6===k.c)f.strokeStyle="#FF0000",f.moveTo(d+1,g+1),f.lineTo(d+a-1,g+a-1),f.stroke(),f.moveTo(d+a-1,g+1),f.lineTo(d+1,g+a-1),f.stroke()}else 3===k.c&&(f.fillStyle="#F5F5F5",f.fillRect(d+1,g+1,a-2,a-2),f.fillStyle="#008000",f.fillText("?",d+a/2,g+a/2))}function aa(d){if(void 0!==c&&!c.m){var g=r.getBoundingClientRect(),f=Math.floor((d.clientX-g.left)/c.s);g=Math.floor((d.clientY-g.top)/c.s);if(!mineSweeperSolver)if(0===d.button&&(z=!1),2===d.button&&(Q=!1),w)z||Q||(c.w(-1,
-1,!1),w=!1,0!==c.f&&1!==c.f)||(c.H(f,g),u.textContent=c.j,c.m&&t());else if(0===d.button)c.w(-1,-1,!1),c.G||U(f,g),0===c.f||1===c.f||4===c.f?(c.V(f,g),u.textContent=c.j,V.textContent=c.i,c.m&&t()):2===c.f?c.K(f,g):3===c.f?(c.O(f,g),n.textContent=c.i,W.textContent=c.i+c.j-1,c.m&&t()):5===c.f&&(c.K(f,g),x.textContent=c.i,c.m&&t());else if(2===d.button){if(c.G||U(f,g),0===c.f||1===c.f||2===c.f||5===c.f)c.J(f,g),n.textContent=c.o,x.textContent=c.i,2===c.f&&c.m&&t()}else 1===d.button&&(c.w(-1,-1,!1),
0===c.f||1===c.f)&&(c.H(f,g),u.textContent=c.j,c.m&&t());else if(0===d.button){switch(F){case A:var k=1;break;case G:k=2;break;case H:k=3;break;case I:k=4;break;case J:k=5;break;case K:k=6;break;case L:k=7;break;case M:k=8;break;case N:k=0;break;case O:k=9;break;case P:k=10}c.M(f,g,k);n.textContent=c.o}}}function ea(){var d=Date.now();ba.textContent=R((d-c.N)/1E3);!c.m&&0<c.D&&d>c.D?(c.B(),n.textContent=c.o,t()):15<=(d-c.S)/1E3&&(S.style.visibility="visible")}function q(d){F!==d.currentTarget&&(F.className=
"unselected",F=d.currentTarget,F.className="selected")}function ca(){window.location.href="/minesweeper"}function fa(){window.clearInterval(T);S.style.visibility="hidden";var d=mineSweeperSmallSquares?24:32,g=[mineSweeperBoardType,mineSweeperWidth,mineSweeperHeight,mineSweeperMines],f=new XMLHttpRequest;f.open("POST","/minesweeper/newgame",!0);f.onreadystatechange=function(){if(4===f.readyState&&200===f.status){var k=JSON.parse(f.responseText);c=new Z(k,r.getContext("2d"),d,mineSweeperQuestions);
r.width=d*c.a;r.height=d*c.g;switch(c.f){case 0:v.textContent="Clear the board without detonating any mines";n.textContent=c.o;y.style.display="inline-block";u.textContent=c.j;B.style.display="inline-block";C.style.display="none";D.style.display="none";E.style.display="none";break;case 1:v.textContent="Clear the board without detonating "+(1===c.j?"any mines":"more than "+c.j+" mines");n.textContent=c.o;y.style.display="inline-block";u.textContent=c.j;B.style.display="inline-block";C.style.display=
"none";D.style.display="none";E.style.display="none";break;case 2:v.textContent="Use flags to mark a number of "+c.i+" mines in "+R(c.C)+" or less";n.textContent=c.o;y.style.display="inline-block";B.style.display="none";x.textContent=c.i;C.style.display="inline-block";D.style.display="none";E.style.display="none";break;case 3:v.textContent="Detonate "+c.i+" mines in "+(c.i+c.j-1)+" moves or less";n.textContent=c.i;y.style.display="inline-block";B.style.display="none";C.style.display="none";W.textContent=
c.i+c.j-1;D.style.display="inline-block";E.style.display="none";break;case 4:v.textContent="Tap  "+c.i+" covered squares without detonating any mines. Flags are not allowed. Time "+R(c.C);y.style.display="none";u.textContent=c.j;B.style.display="inline-block";C.style.display="none";D.style.display="none";V.textContent=c.i;E.style.display="inline-block";break;case 5:v.textContent="Use green flags to mark a number of "+c.i+" safe squares in "+R(c.C)+" or less",n.textContent=c.o,y.style.display="inline-block",
B.style.display="none",x.textContent=c.i,C.style.display="inline-block",D.style.display="none",E.style.display="none"}ba.textContent="0:00";c.P();c.G&&U()}};f.send(JSON.stringify(g))}function X(){window.clearInterval(T);var d=mineSweeperSmallSquares?22:32,g=mineSweeperWidth,f=mineSweeperHeight,k=mineSweeperMines,a=Array(8+3*g*f);a[0]=1;a[1]=g;a[2]=f;a[3]=k;a[4]=1;a[5]=0;a[6]=0;a[7]=0;g*=f;for(f=0;f<g;f++)a[8+3*f]=0,a[3*f+9]=0,a[3*f+10]=0;c=new Z(a,r.getContext("2d"),d,mineSweeperQuestions);r.width=
d*c.a;r.height=d*c.g;N.width=N.height=d;A.width=A.height=d;G.width=G.height=d;H.width=H.height=d;I.width=I.height=d;J.width=J.height=d;K.width=K.height=d;L.width=L.height=d;M.width=M.height=d;O.width=O.height=d;P.width=P.height=d;v.textContent="WELCOME TO MY MINESWEEPER PROGRAM";n.textContent=c.o;y.style.display="inline-block";c.P();m(0,0,N.getContext("2d"),
new p(0,!1,1),d);m(0,0,A.getContext("2d"),new p(1,!1,1),d);m(0,0,G.getContext("2d"),new p(2,!1,1),d);m(0,0,H.getContext("2d"),new p(3,!1,1),d);m(0,0,I.getContext("2d"),new p(4,!1,1),d);m(0,0,J.getContext("2d"),new p(5,!1,1),d);m(0,0,K.getContext("2d"),new p(6,!1,1),d);m(0,0,L.getContext("2d"),new p(7,!1,1),d);m(0,0,M.getContext("2d"),new p(8,!1,1),d);m(0,0,O.getContext("2d"),new p(0,!1,2),d);m(0,0,P.getContext("2d"),new p(0,!1,0),d)}function U(d,g){c.G||c.U(d,g);T=window.setInterval(ea,1E3)}function t(){window.clearInterval(T);
S.style.visibility="hidden";if(0<c.j){var d=(c.D-c.N)/100,g=Math.floor(d%600/10);v.textContent="Completed in "+Math.floor(d/600)+":"+(10>g?"0":"")+g+"."+Math.floor(d%10)+"!"}else v.textContent="Failed!"}function R(d){var g=Math.floor(d%60);return Math.floor(d/60)+":"+(10>g?"0":"")+g}function da(){if(void 0!==c&&!c.m){var d=new XMLHttpRequest;d.open("POST","/minesweeper/requesthelp",!0);d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var g=JSON.parse(d.responseText);0<g.length&&
(c.T(g),n.textContent=c.o,da())}};d.send(JSON.stringify(c.R()))}}var c,r=document.getElementById("MineBoardCanvas");window.addEventListener("mousedown",function(d){if(void 0!==c&&!c.m&&!mineSweeperSolver){var g=r.getBoundingClientRect(),f=Math.floor((d.clientX-g.left)/c.s);g=Math.floor((d.clientY-g.top)/c.s);0===d.button?(z=!0,Q&&(w=!0),0<=f&&0<=g&&f<c.a&&g<c.g&&d.preventDefault()):2===d.button?(Q=!0,z&&(w=!0),Y&&(Y=!1,aa(d))):1===d.button&&c.w(f,g,!0);z&&c.w(f,g,w)}},!0);window.addEventListener("mousemove",
function(d){if(void 0!==c&&!c.m&&!mineSweeperSolver){var g=r.getBoundingClientRect(),f=Math.floor((d.clientX-g.left)/c.s);g=Math.floor((d.clientY-g.top)/c.s);z?c.w(f,g,w):4===d.buttons&&c.w(f,g,!0)}},!0);window.addEventListener("mouseup",aa,!0);window.addEventListener("dblclick",function(d){if(void 0!==c&&!c.m&&!mineSweeperSolver){var g=r.getBoundingClientRect(),f=Math.floor((d.clientX-g.left)/c.s);g=Math.floor((d.clientY-g.top)/c.s);0===d.button&&(0===c.f||1===c.f?(c.H(f,g),u.textContent=c.j,c.m&&
t()):5===c.f&&(c.H(f,g),x.textContent=c.i,c.m&&t()))}},!0);window.addEventListener("touchstart",function(){void 0===c||c.m||(Y=!0)},!0);window.addEventListener("keyup",function(d){113===d.keyCode&&(mineSweeperSolver?X():ca())},!0);document.getElementById("RequestHelpButton").addEventListener("click",function(){if(void 0!==c&&!c.m){mineSweeperSolver||(S.style.visibility="hidden");c.S=Date.now();var d=new XMLHttpRequest;d.open("POST","/minesweeper/requesthelp",!0);d.onreadystatechange=function(){if(4===
d.readyState&&200===d.status){var g=JSON.parse(d.responseText);mineSweeperSolver?(c.T(g),n.textContent=c.o):(c.Z(g),0===c.f||1===c.f?(n.textContent=c.o,u.textContent=c.j):2===c.f?(n.textContent=c.o,x.textContent=c.i):3===c.f?(n.textContent=c.i,W.textContent=c.i+c.j-1):4===c.f?(V.textContent=c.i,u.textContent=c.j):5===c.f&&(n.textContent=c.o,x.textContent=c.i),c.m&&t())}};d.send(JSON.stringify(c.R()))}},!0);mineSweeperSolver?(document.getElementById("ResetGameButton").addEventListener("click",X,!0),
document.getElementById("SolveBoardButton").addEventListener("click",da,!0)):document.getElementById("NewGameButton").addEventListener("click",ca,!0);var n=document.getElementById("MinesLeftSpan"),ba=document.getElementById("TimeSpan"),u=document.getElementById("LivesSpan"),x=document.getElementById("FlagsSpan"),W=document.getElementById("MovesSpan"),V=document.getElementById("TapsSpan"),y=document.getElementById("MinesLeftDiv"),B=document.getElementById("LivesDiv"),C=document.getElementById("FlagsDiv"),
D=document.getElementById("MovesDiv"),E=document.getElementById("TapsDiv"),S=document.getElementById("RequestHelpButton"),v=document.getElementById("MessageDiv"),A=document.getElementById("Mine1Canvas"),G=document.getElementById("Mine2Canvas"),H=document.getElementById("Mine3Canvas"),I=document.getElementById("Mine4Canvas"),J=document.getElementById("Mine5Canvas"),K=document.getElementById("Mine6Canvas"),L=document.getElementById("Mine7Canvas"),M=document.getElementById("Mine8Canvas"),N=document.getElementById("Mine0Canvas"),
O=document.getElementById("MineFCanvas"),P=document.getElementById("MineCCanvas"),F=A,z=!1,Q=!1,w=!1,Y=!1,T;mineSweeperSolver?(A.addEventListener("click",q,!0),G.addEventListener("click",q,!0),H.addEventListener("click",q,!0),I.addEventListener("click",q,!0),J.addEventListener("click",q,!0),K.addEventListener("click",q,!0),L.addEventListener("click",q,!0),M.addEventListener("click",q,!0),N.addEventListener("click",q,!0),O.addEventListener("click",q,!0),P.addEventListener("click",q,!0),X()):fa()})();